{"version":3,"file":"static/js/584.c9f79e6d.chunk.js","mappings":"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","sources":["app/user-pages/Login.js"],"sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { Form } from \"react-bootstrap\";\nimport axios from \"axios\";\n\nconst Login = () => {\n  const history = useHistory();\n\n  // const [Password, setPassword] = useState();\n  // const [otp, setOtp] = useState(false)\n  const [Phone, setPhone] = useState();\n  const [twofactor_code, settwofactor_code] = useState();\n  const [otp, setOtp] = useState(false);\n  const [secretCode, setSecretCode] = useState();\n\n  // console.log(FirstName);\n  const beckendLocalApiUrl = process.env.REACT_APP_BACKEND_LOCAL_API;\n  const beckendLiveApiUrl = process.env.REACT_APP_BACKEND_LIVE_API;\n  const nodeMode = process.env.NODE_ENV;\n  if (nodeMode === \"development\") {\n    var baseUrl = beckendLocalApiUrl;\n  } else {\n    var baseUrl = beckendLiveApiUrl;\n  }\n\n  // const handleClick = async (e) => {\n  //   e.preventDefault();\n  //   if (!Phone) {\n  //     alert(\"Enter Phone and Password\")\n  //   } else {\n  //     const { data } = await axios.post(baseUrl+\"login/admin\", {\n  //       Phone,\n  //       Password\n  //     }).then((res) => {\n  //       const token = res.data.data[0];\n  //       console.log(token);\n  //       localStorage.setItem('token', token);\n\n  //       // history.push(\"/dashboard\")\n  //       history.push(\"/dashboard\")\n  //       window.location.reload()\n\n  //     });\n  //   }\n  // }\n  const handleClick = async (e) => {\n    e.preventDefault();\n\n    if (!Phone) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Oops...\",\n        text: \"Please enter your phone number\",\n      });\n    } else {\n      await axios\n        .post(baseUrl + `login/admin`, {\n          Phone,\n        })\n        .then((respone) => {\n          if (respone.data.status == 101) {\n            Swal.fire({\n              icon: \"error\",\n              title: \"Oops...\",\n              text: respone.data.msg,\n            });\n          } else if (respone.data.status == 200) {\n            setOtp(true);\n            //console.log(respone.data);\n            setSecretCode(respone.data.secret);\n            if (respone.data.myToken) {\n              Swal.fire({\n                icon: \"success\",\n                title: \"OTP\",\n                text: \"OTP For Test Login: \" + respone.data.myToken,\n              });\n            }\n          }\n        })\n        .catch((e) => {\n          Swal.fire({\n            icon: \"error\",\n            title: \"Oops...\",\n            text: \"Something went wrong\",\n            // width: '20%',\n            // height:'20%',\n          });\n        });\n    }\n  };\n\n  const varifyOtp = async (e) => {\n    e.preventDefault();\n    console.log(\"verify otp sumbut req\");\n    if (!Phone) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Oops...\",\n        text: \"Please enter your phone number\",\n      });\n    } else {\n      await axios\n        .post(baseUrl + `login/admin/finish`, {\n          Phone,\n          twofactor_code,\n          secretCode,\n        })\n        .then((respone) => {\n          if (respone.data.status == 101) {\n            Swal.fire({\n              icon: \"error\",\n              title: \"Oops...\",\n              text: respone.data.msg,\n            });\n          } else if (respone.data.status == 200) {\n            const token = respone.data.token;\n            localStorage.setItem(\"token\", token);\n            history.push(\"/dashboard\")\n            window.location.reload(true);\n          } else {\n            Swal.fire({\n              icon: \"error\",\n              title: \"Oops...\",\n              text: \"Something went wrong!\",\n            });\n          }\n        })\n        .catch((e) => {\n          Swal.fire({\n            icon: \"error\",\n            title: \"Oops...\",\n            text: \"Something went wrong!\",\n          });\n        });\n    }\n  };\n\n  const setError = () => {\n    Swal.fire({\n      icon: \"error\",\n      title: \"Oops...\",\n      text: \"Invalid Number\",\n      confirmation: true,\n    });\n  };\n\n  const [WebSitesettings, setWebsiteSettings] = useState(\"\");\n\n  const fetchData = () => {\n    return fetch(baseUrl + \"settings/data\")\n      .then((response) => response.json())\n      .then((data) => setWebsiteSettings(data));\n  };\n  //console.log(WebSitesettings);\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  return (\n      <div>\n        <div className=\"d-flex align-items-center auth px-0\">\n          <div className=\"row w-100 mx-0\">\n            <div className=\"col-lg-4 mx-auto\">\n              <div className=\"card text-left py-5 px-4 px-sm-5\">\n                <div className=\"brand-logo\">\n                  <img src={baseUrl + WebSitesettings.Logo} alt=\"\" />\n                </div>\n                <h4>Login {WebSitesettings.WebsiteName} Admin</h4>\n                {/* <h6 className=\"font-weight-light\">Sign in to continue.</h6> */}\n                <Form className=\"pt-7\">\n                  <Form.Group className=\"d-flex search-field \">\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Username\"\n                      size=\"lg\"\n                      maxLength={'10'}\n                      className=\"h-auto\"\n                      onChange={(e) => setPhone(e.target.value)}\n                    />\n                  </Form.Group>\n                  {otp && <div className=\"bg-white  cxy flex-column\" style={{\n                     height: '60px', borderRadius: '5px', marginTop: \"10px\"\n                  }}>\n\n                    <div className=\"input-group mb-2\" style={{ transition: 'top 0.5s ease 0s', top: '5px' }}>\n                      <div className=\"input-group-prepend\">\n                        <div className=\"input-group-text\" style={{ backgroundColor: '#e9ecef', border: '1px solid #d8d6de' }}>OTP</div>\n                      </div>\n                      <input className=\"form-control h-auto\" name=\"password\" type=\"tel\" placeholder=\"Enter OTP\"\n                        onChange={(e) => settwofactor_code(e.target.value)}\n                        style={{ transition: 'all 3s ease-out 0s', borderRadius: \"4px\", border: '1px solid #d8d6de' }} />\n                      {/* <div className=\"invalid-feedback\">Enter a valid mobile number</div> */}\n                    </div>\n\n                  </div>}\n                  {!otp && <button className=\"Login-button btn btn-dark cxy mt-4\" onClick={(e) => handleClick(e)} >Next\n                  </button>}\n                  {otp && <button className=\"Login-button btn btn-dark cxy mt-4\" onClick={(e) => varifyOtp(e)} >Verify\n                  </button>}\n                </Form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  );\n};\n\nexport default Login;"],"names":["history","useHistory","useState","Phone","setPhone","twofactor_code","settwofactor_code","otp","setOtp","secretCode","setSecretCode","baseUrl","process","handleClick","e","preventDefault","Swal","icon","title","text","axios","then","respone","data","status","msg","secret","myToken","catch","varifyOtp","console","log","token","localStorage","setItem","push","window","location","reload","WebSitesettings","setWebsiteSettings","useEffect","fetch","response","json","className","src","Logo","alt","WebsiteName","type","placeholder","size","maxLength","onChange","target","value","style","height","borderRadius","marginTop","transition","top","backgroundColor","border","name","onClick"],"sourceRoot":""}